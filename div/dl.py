import requests
import os
from datetime import date

urls = [
	"19200102_154_1_1",
	"19200103_154_2_1",
	"19200105_154_3_1",
	"19200106_154_4_1",
	"19200107_154_5_1",
	"19200108_154_6_1",
	"19200109_154_7_1",
	"19200110_154_8_1",
	"19200112_154_9_1",
	"19200113_154_10_1",
	"19200114_154_11_1",
	"19200115_154_12_1",
	"19200116_154_13_1",
	"19200117_154_14_1",
	"19200119_154_15_1",
	"19200120_154_16_1",
	"19200121_154_17_1",
	"19200122_154_18_1",
	"19200123_154_19_1",
	"19200124_154_20_1",
	"19200126_154_21_1",
	"19200127_154_22_1",
	"19200128_154_23_1",
	"19200129_154_24_1",
	"19200130_154_25_1",
	"19200131_154_26_1",
	"19200202_154_27_1",
	"19200203_154_28_1",
	"19200204_154_29_1",
	"19200205_154_30_1",
	"19200206_154_31_1",
	"19200207_154_32_1",
	"19200209_154_33_1",
	"19200210_154_34_1",
	"19200211_154_35_1",
	"19200212_154_36_1",
	"19200213_154_37_1",
	"19200214_154_38_1",
	"19200216_154_39_1",
	"19200217_154_40_1",
	"19200218_154_41_1",
	"19200219_154_42_1",
	"19200220_154_43_1",
	"19200221_154_44_1",
	"19200223_154_45_1",
	"19200224_154_46_1",
	"19200225_154_47_1",
	"19200226_154_48_1",
	"19200227_154_49_1",
	"19200228_154_50_1",
	"19200301_154_51_1",
	"19200302_154_52_1",
	"19200303_154_53_1",
	"19200304_154_54_1",
	"19200305_154_55_1",
	"19200306_154_56_1",
	"19200308_154_57_1",
	"19200309_154_58_1",
	"19200310_154_59_1",
	"19200311_154_60_1",
	"19200312_154_61_1",
	"19200313_154_62_1",
	"19200315_154_63_1",
	"19200316_154_64_1",
	"19200317_154_65_1",
	"19200318_154_66_1",
	"19200319_154_67_1",
	"19200320_154_68_1",
	"19200322_154_69_1",
	"19200323_154_70_1",
	"19200324_154_71_1",
	"19200325_154_72_1",
	"19200326_154_73_1",
	"19200327_154_74_1",
	"19200329_154_75_1",
	"19200330_154_76_1",
	"19200331_154_77_1",
	"19200403_154_78_1",
	"19200406_154_79_1",
	"19200407_154_80_1",
	"19200408_154_81_1",
	"19200409_154_82_1",
	"19200410_154_83_1",
	"19200412_154_84_1",
	"19200413_154_85_1",
	"19200414_154_86_1",
	"19200415_154_87_1",
	"19200416_154_88_1",
	"19200417_154_89_1",
	"19200419_154_90_1",
	"19200420_154_91_1",
	"19200421_154_92_1",
	"19200422_154_93_1",
	"19200423_154_94_1",
	"19200424_154_95_1",
	"19200426_154_96_1",
	"19200427_154_97_1",
	"19200428_154_98_1",
	"19200429_154_99_1",
	"19200430_154_100_1",
	"19200501_154_101_1",
	"19200503_154_102_1",
	"19200504_154_103_1",
	"19200505_154_104_1",
	"19200506_154_105_1",
	"19200507_154_106_1",
	"19200508_154_107_1",
	"19200510_154_108_1",
	"19200511_154_109_1",
	"19200512_154_110_1",
	"19200514_154_111_1",
	"19200515_154_112_1",
	"19200517_154_113_1",
	"19200518_154_114_1",
	"19200519_154_115_1",
	"19200520_154_116_1",
	"19200521_154_117_1",
	"19200522_154_118_1",
	"19200525_154_119_1",
	"19200526_154_120_1",
	"19200527_154_121_1",
	"19200528_154_122_1",
	"19200529_154_123_1",
	"19200531_154_124_1",
	"19200601_154_125_1",
	"19200602_154_126_1",
	"19200603_154_127_1",
	"19200604_154_128_1",
	"19200605_154_129_1",
	"19200607_154_130_1",
	"19200608_154_131_1",
	"19200609_154_132_1",
	"19200610_154_133_1",
	"19200611_154_134_1",
	"19200612_154_135_1",
	"19200614_154_136_1",
	"19200615_154_137_1",
	"19200616_154_138_1",
	"19200617_154_139_1",
	"19200618_154_140_1",
	"19200619_154_141_1",
	"19200621_154_142_1",
	"19200622_154_143_1",
	"19200623_154_144_1",
	"19200624_154_145_1",
	"19200625_154_146_1",
	"19200626_154_147_1",
	"19200628_154_148_1",
	"19200629_154_149_1",
	"19200630_154_150_1",
	"19200701_154_151_1",
	"19200702_154_152_1",
	"19200703_154_153_1",
	"19200705_154_154_1",
	"19200706_154_155_1",
	"19200707_154_156_1",
	"19200708_154_157_1",
	"19200709_154_158_1",
	"19200710_154_159_1",
	"19200712_154_160_1",
	"19200713_154_161_1",
	"19200714_154_162_1",
	"19200715_154_163_1",
	"19200716_154_164_1",
	"19200717_154_165_1",
	"19200719_154_166_1",
	"19200720_154_167_1",
	"19200721_154_168_1",
	"19200722_154_169_1",
	"19200723_154_170_1",
	"19200724_154_171_1",
	"19200726_154_172_1",
	"19200727_154_173_1",
	"19200728_154_174_1",
	"19200729_154_175_1",
	"19200730_154_176_1",
	"19200731_154_177_1",
	"19200802_154_178_1",
	"19200803_154_179_1",
	"19200804_154_180_1",
	"19200805_154_181_1",
	"19200806_154_182_1",
	"19200807_154_183_1",
	"19200809_154_184_1",
	"19200810_154_185_1",
	"19200811_154_186_1",
	"19200812_154_187_1",
	"19200813_154_188_1",
	"19200814_154_189_1",
	"19200816_154_190_1",
	"19200817_154_191_1",
	"19200818_154_192_1",
	"19200819_154_193_1",
	"19200820_154_194_1",
	"19200821_154_195_1",
	"19200823_154_196_1",
	"19200824_154_197_1",
	"19200825_154_198_1",
	"19200826_154_199_1",
	"19200827_154_200_1",
	"19200828_154_201_1",
	"19200830_154_202_1",
	"19200831_154_203_1",
	"19200901_154_204_1",
	"19200902_154_205_1",
	"19200903_154_206_1",
	"19200904_154_207_1",
	"19200906_154_208_1",
	"19200907_154_209_1",
	"19200908_154_210_1",
	"19200909_154_211_1",
	"19200910_154_212_1",
	"19200911_154_213_1",
	"19200913_154_214_1",
	"19200914_154_215_1",
	"19200915_154_216_1",
	"19200916_154_217_1",
	"19200917_154_218_1",
	"19200918_154_219_1",
	"19200920_154_220_1",
	"19200921_154_221_1",
	"19200922_154_222_1",
	"19200923_154_223_1",
	"19200924_154_224_1",
	"19200925_154_225_1",
	"19200927_154_226_1",
	"19200928_154_227_1",
	"19200929_154_228_1",
	"19200930_154_229_1",
	"19201001_154_230_1",
	"19201002_154_231_1",
	"19201004_154_232_1",
	"19201005_154_233_1",
	"19201006_154_234_1",
	"19201007_154_235_1",
	"19201008_154_236_1",
	"19201009_154_237_1",
	"19201011_154_238_1",
	"19201012_154_239_1",
	"19201013_154_240_1",
	"19201014_154_241_1",
	"19201015_154_242_1",
	"19201016_154_243_1",
	"19201018_154_244_1",
	"19201019_154_245_1",
	"19201020_154_246_1",
	"19201021_154_247_1",
	"19201022_154_248_1",
	"19201023_154_249_1",
	"19201025_154_250_1",
	"19201026_154_251_1",
	"19201027_154_252_1",
	"19201028_154_253_1",
	"19201029_154_254_1",
	"19201030_154_255_1",
	"19201101_154_256_1",
	"19201102_154_257_1",
	"19201103_154_258_1",
	"19201104_154_259_1",
	"19201106_154_260_1",
	"19201108_154_261_1",
	"19201109_154_262_1",
	"19201110_154_263_1",
	"19201111_154_264_1",
	"19201112_154_265_1",
	"19201113_154_266_1",
	"19201115_154_267_1",
	"19201116_154_268_1",
	"19201117_154_269_1",
	"19201118_154_270_1",
	"19201119_154_271_1",
	"19201120_154_272_1",
	"19201122_154_273_1",
	"19201123_154_274_1",
	"19201124_154_275_1",
	"19201125_154_276_1",
	"19201126_154_277_1",
	"19201127_154_278_1",
	"19201129_154_279_1",
	"19201130_154_280_1",
	"19201201_154_281_1",
	"19201202_154_282_1",
	"19201203_154_283_1",
	"19201204_154_284_1",
	"19201206_154_285_1",
	"19201207_154_286_1",
	"19201208_154_287_1",
	"19201209_154_288_1",
	"19201210_154_289_1",
	"19201211_154_290_1",
	"19201213_154_291_1",
	"19201214_154_292_1",
	"19201215_154_293_1",
	"19201216_154_294_1",
	"19201217_154_295_1",
	"19201218_154_296_1",
	"19201220_154_297_1",
	"19201221_154_298_1",
	"19201222_154_299_1",
	"19201223_154_300_1",
	"19201224_154_301_1",
	"19201227_154_302_1",
	"19201228_154_303_1",
	"19201229_154_304_1",
	"19201230_154_305_1",
	"19201231_154_306_1"
]

def dages():
	today = date.today()
	s = "1920" + today.strftime("%m%d")
	for i in urls:
		if i.startswith(s):
			return i

loc = dages()

if loc:
	url = 'https://www.nb.no/nbsok/content/pdf?urn=URN:NBN:no-nb_digavis_trondhjemsadresseavis_null_null_'+ loc +'&resolutionlevel=6'

	print("Downloading todays PDF from " + url)
	myfile = requests.get(url)

	open('avis.pdf', 'wb').write(myfile.content)

	print("Deleting old image files")
	os.system('rm ../html/img/output-*.jpg')

	print("Generatng new image files")
	os.system('convert -density 150 avis.pdf -quality 20 ../html/img/output.jpg')

	print("Cleaning up")
	os.system('rm avis.pdf')
