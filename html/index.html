<!DOCTYPE html>
<html>
<head>
	<title>Gamle Nyheter</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="viewerjs/dist/viewer.min.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
	<div>
		<ul id="images">
			<li><img src="img/output-0.jpg" alt="Side 1"></li>
			<li><img src="img/output-1.jpg" alt="Side 2"></li>
			<li><img src="img/output-2.jpg" alt="Side 3"></li>
			<li><img src="img/output-3.jpg" alt="Side 4"></li>
			<li><img src="img/output-4.jpg" alt="Side 5"></li>
			<li><img src="img/output-5.jpg" alt="Side 6"></li>
			<li><img src="img/output-6.jpg" alt="Side 7"></li>
			<li><img src="img/output-7.jpg" alt="Side 8"></li>
			<li><img src="img/output-8.jpg" alt="Side 9"></li>
			<li><img src="img/output-9.jpg" alt="Side 10"></li>
			<li><img src="img/output-10.jpg" alt="Side 11"></li>
			<li><img src="img/output-11.jpg" alt="Side 12"></li>
			<li><img src="img/output-12.jpg" alt="Side 13"></li>
			<li><img src="img/output-13.jpg" alt="Side 14"></li>
			<li><img src="img/output-14.jpg" alt="Side 15"></li>
			<li><img src="img/output-15.jpg" alt="Side 16"></li>
			<li><img src="img/output-16.jpg" alt="Side 17"></li>
			<li><img src="img/output-17.jpg" alt="Side 18"></li>
		</ul>
	</div>

	<script src="viewerjs/dist/viewer.min.js"></script>

	<script>

		// In order to bypass caching of images each day, the date is appended 
		// as a parameter to the URL to every image. 
		const d = new Date();
		
		// E.g. "WedMar182020"
		let datestring = d.toDateString();
		datestring = datestring.replace(" ", "").replace(" ", "").replace(" ", "");
		
		const listItems = document.getElementById('images').children;
		for (let i = 0; i < listItems.length; i++) {
			const imgElement = listItems[i].children[0]
			imgElement.setAttribute('src', imgElement.getAttribute('src') + "?f=" + datestring)
		}

		// Create the gallery based on every image in #images
		// https://github.com/fengyuanchen/viewerjs
		const gallery = new Viewer(document.getElementById('images'), {
			button: false,
			backdrop: 'static',
			loading: false,
			rotatable: false,
			scalable: false,
			viewed() {
				// All methods are available here except "show".
				let title = "<a target='_blank' href='https://www.nb.no/search?mediatype=aviser&series=%22Adresseavisen%22&fromDate=19200101&toDate=19201231'>Trondhjems Adresseavis</a> fra Nasjonalbiblioteket / <a target='_blank' href='https://creativecommons.org/licenses/by-nd/2.0/'>CC BY ND</a>"
				document.getElementsByClassName('viewer-title')[0].innerHTML = title;
			},
			toolbar: {
				zoomIn: 2,
				zoomOut: 2,
				prev: 1,
				play: {
					show: 1,
					size: 'large',
				},
				next: 1,
				oneToOne: 2,
				reset: 2,
			  },
		});
		gallery.show();
	</script>

</body>
</html>
